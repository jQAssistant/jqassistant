//
//
//

// Useless values as place holder for editing in IntelliJ

ifndef::rule-type[]
:rule-type: foobar
:rule-type-plural: foobars
:rule-type-default-severity: snafu
:rule-section-title: Foobars
endif::rule-type[]

=== {rule-section-title}

A {rule-type} in a YAML rule document is represented as a map of keys. The keynames
are the same or very similar to the element and attribute names used in
jQAssistants's XML Schema.

//------------------------------------------------------------------------

.Toplevel keys of a map to specify a {rule-type} in a YAML rule document
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `id`
| 1
| Unique id of the {rule-type}.

| `deprecated`
| 0..1
| Marks a {rule-type} as deprecated. A given text should be used to inform the
  user of the deprecation and the consequences of the deprecation.

| `description`
| 0..1
| Description of the {rule-type}.  Intended to be shown to the user in case
  the verification of the rule failed and to document the rule itself.

| `language`
| 0..1
| Specifies the language the actual rule is written in.

  If not specified it is assumed that the actual rule is written
  in Cypher.

// todo Link to new user guide and to the section about writing rules in other languages than Cypher

| `requiresConcepts`
| 0..1
| Sequence of required concepts of the rule, which must be executed
  before this {rule-type} will be executed.

| `requiresParameters`
| 0..1
| Sequence of required parameters of the {rule-type}.

| `severity`
| 0..1
| The serverity of the {rule-type}. Must be one of `blocker`, `critical`,
  `major`, `minor`, or `info`. If not specified, the default severity
  for a {rule-type} is `{rule-type-default-severity}`.

// todo Link to the section on our severites in the user manual
// todo What is the default severity?

| `verify`
| 0..1
| Specification of the verification method of the {rule-type}.
  If no verification has been specified, the verification will be
  done via row counting.

| `source`
| 1
| The statement representing the {rule-type}.

|===

//------------------------------------------------------------------------

.Keys of a map to specify the required concepts
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `refId`
| 1
| The id of a concept which must be executed before this {rule-type}.
  jQAssistant will ensure the required execution order of all concepts.

| `severity`
| 0..1
| The severity to be applied to the referenced {rule-type}, overwriting
  the actual specified severity.

| `optional`
| 0..1
| Specifies if a {rule-type} is optional or not. Possible values are `true`
  and `false`. The default value is `false`.

// todo Where did we document what optional means?

|===

//------------------------------------------------------------------------

.Keys of a map to specify the required parameters
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `name`
| 1
| The name of the required parameter.

| `type`
| 1
| The data type of the parameter. Must be one of: `boolean`, `byte`,
  `char`, `double`, `float`, `int`, `long`, `short`, `String`

| `defaultValue`
| 0..1
| The default value for the parameter if not specified.

|===

//------------------------------------------------------------------------

.Keys of a map to specify the verification method
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `aggregation`
| 0..1
| Verification should be performed by aggregating the value of a
  specific column. See
  xref:yaml-{rule-type}-aggregation-options[aggregation options] for details.

| `rowCount`
| 0..1
| Verification should be performed by counting the results rows.
  See xref:yaml-{rule-type}-rowcount-options[rowcount options] for details.

|===

If no verification method has been specified, the default
result verification via row counting will be performed.

// todo Link to the section on verification in the new user guide


//------------------------------------------------------------------------

[[yaml-{rule-type}-aggregation-options]]

.Keys of a map to specify a result verification via aggregation
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `column`
| 0..1
| The column those value will be used to perform the verification.
  If omitted the first column of the result set will be used for the
  verification.

| `max`
| 0..1
| The allowed inclusive maximal value for the verification used column.

| `min`
| 0..1
| The allowed inclusive minimal value for the verification used column.

|===

// todo Document how the verification is done if none of these values are given

//------------------------------------------------------------------------

[[yaml-{rule-type}-rowcount-options]]

.Keys of a map to specify a result verification via row counting
[cols="2,1,5",options="header"]
|===

| Key
| Cardinality
| Description

| `max`
| 0..1
| Allowed maximal inclusive number of rows in the result set of a {rule-type}.

| `min`
| 0..1
| Required minimal inclusive number of rows in the result set of a {rule-type}.


|===

// todo Document the report configuration


